#! node

// http://repl.it/0Fb

// PROBLEM //

/*
Pentagonal numbers are generated by the formula, Pn=n(3n−1)/2. The first ten
pentagonal numbers are:

1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...

It can be seen that P4 + P7 = 22 + 70 = 92 = P8. However, their difference,
70 − 22 = 48, is not pentagonal.

Find the pair of pentagonal numbers, Pj and Pk, for which their sum and
difference are pentagonal and D = |Pk − Pj| is minimised; what is the value
of D?
*/

// ANSWER //

// http://en.wikipedia.org/wiki/Pentagonal_number
function isPentagonal(number) {
    var n = (Math.sqrt(1 + 24 * number) + 1) / 6;
    return n == (n|0);
}

function getPentagonalNumber(n) {
  return n * (3 * n - 1) / 2;
}

function findPentagonalNumber() {
  for (var j = 2; true; j++) {
    var pj = getPentagonalNumber(j);
    for (var k = j - 1; k > 0; k--) {
      var pk = getPentagonalNumber(k);

      if (isPentagonal(pj + pk) && isPentagonal(pj - pk))
        return pj - pk;
    }
  }
}

var result = findPentagonalNumber();

console.log(result);

// 5482660
